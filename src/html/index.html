<!DOCTYPE html>
<html>
  <head>
    <title>回放</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/rrweb-player@latest/dist/style.css" />
    <script src="/plugin/player.js"></script>
    <!-- <script src="/plugin/replay.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/rrweb-player@latest/dist/index.js"></script> -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script>
      function autoPlay(events) {
        new player({
          target: document.body, // customizable root element
          data: {
            events,
            autoPlay: true
          }
        })
      }

      // function autoPlay(events) {
      //   const replayer = new replay(events)
      //   replayer.play()
      // }
      $(function() {
        $.ajax({
          method: 'get',
          url: '/getEvents',
          dataType: 'json',
          success: function(list) {
            const events = list.filter(item => item.content).map(item => JSON.parse(item.content))
            autoPlay(events)
          }
        })
      })
    </script>
  </head>
  <body></body>
</html>
